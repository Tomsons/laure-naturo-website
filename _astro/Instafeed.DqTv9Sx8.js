import{j as e}from"./jsx-runtime.BpvHbGLm.js";import{P as b}from"./pagination.DotPdGsl.js";import{r as P,S as v,a as y}from"./get.C2NIhgRQ.js";import{g as z,r as d}from"./index.DgOxCJIz.js";/* empty css                       */import{z as $,L as R,b as V,q as E,F as L}from"./dialog.DLP3IqRF.js";import{c as x}from"./createLucideIcon.G1nix5cj.js";import"./index.C3AoWCtw.js";import"./index.DUh_eYIC.js";var F=P();const c=z(F),A="#FF0069",N=d.forwardRef(function({title:t="Instagram",color:r="currentColor",size:a=24,...i},l){return r==="default"&&(r=A),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:a,height:a,fill:r,viewBox:"0 0 24 24",ref:l,...i,children:[e.jsx("title",{children:t}),e.jsx("path",{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"})]})});/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],D=x("arrow-left",B);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],G=x("arrow-right",q);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],H=x("circle-x",O);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],W=x("heart",T);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]],Y=x("images",U);/**
 * @license lucide-react v0.514.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],X=x("message-circle",Z),J=({open:s,onClose:t,children:r})=>e.jsx("div",{children:e.jsxs(R,{open:s,onClose:()=>t?.(!1),className:"relative z-21",children:[e.jsx(V,{transition:!0,className:"fixed inset-0 bg-turquoise/75 transition-opacity duration-500 ease-in-out data-closed:opacity-0"}),e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10 sm:pl-16",children:e.jsxs(E,{transition:!0,className:"pointer-events-auto relative w-screen max-w-md transform transition duration-500 ease-in-out data-closed:translate-x-full sm:duration-700",children:[e.jsx(L,{children:e.jsx("div",{className:"absolute top-0 left-0 -ml-8 flex pt-4 pr-2 duration-500 ease-in-out data-closed:opacity-0 sm:-ml-10 sm:pr-4",children:e.jsxs("button",{type:"button",onClick:()=>t?.(!1),className:"relative rounded-md text-gray-300 hover:text-white focus-visible:ring-2 focus-visible:ring-white focus-visible:outline-hidden",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"})]})})}),r]})})})})]})}),K=({open:s,onClose:t,children:r})=>e.jsx(J,{open:s,onClose:t,children:r}),Q=({children:s,title:t})=>e.jsxs("div",{className:"flex h-full flex-col overflow-y-auto bg-white py-6 shadow-xl",children:[e.jsx("div",{className:"px-4 sm:px-6",children:e.jsx($,{className:"text-base font-semibold text-gray-900",children:t})}),e.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6 overflow-auto",children:s})]}),j={Root:K,Content:Q},ee=({children:s})=>e.jsx("div",{className:"insta-drawer",children:s}),se=({canGoBack:s,canGoForward:t,onGoBack:r,onGoForward:a,children:i})=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{disabled:!s,onClick:r,className:"disabled:opacity-50",children:e.jsx(D,{size:24})}),i,e.jsx("button",{disabled:!t,onClick:a,className:"disabled:opacity-50",children:e.jsx(G,{size:24})})]}),te=({data:s})=>{const t=d.useRef(null),r=()=>{if(t.current){const a=t.current.parentElement?.offsetWidth;t.current.style.width=`${a}px`}};return d.useEffect(()=>(t.current&&r(),window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]),e.jsx("div",{className:"swiper-gallery w-[320px]",ref:t,children:e.jsx(v,{pagination:{clickable:!0},modules:[b],children:(s.children?.data||[]).map((a,i)=>e.jsx(y,{className:"pb-8",children:e.jsx("div",{children:e.jsx("img",{className:"object-fill",src:c(a,"media.[0].src",c(a,"media.[0].url","")),...c(a,"media.[0].attributes",{})})})},i))})})},re=({data:s})=>{const t=s.children&&s.children.data&&s.children.data.length>0,r=s.media_type==="VIDEO",a=c(s,"media[0].url",c(s,"media[0].src","")),i=c(s,"thumbnail[0].src","");return r?e.jsx("video",{className:"",src:a,poster:i,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,controls:!0,children:"Your browser does not support the video tag."}):t?e.jsx(te,{data:s}):e.jsx("img",{src:a,className:"w-full h-full object-cover",...c(s,"media[0].attributes",{})})},ae=({data:s})=>{const t=s.caption.replace(/\n/g,"<br />");return e.jsxs("div",{className:"flex flex-col",children:[e.jsx(re,{data:s}),e.jsx("div",{dangerouslySetInnerHTML:{__html:t.replaceAll("—————————————————————————————","<hr/>")},className:"py-4 wrap-break-word"}),e.jsx("a",{href:`https://www.instagram.com/p/${s.shortcode}/`,target:"_blank",rel:"noopener noreferrer",className:"text-brown text-center self-center z-40",children:e.jsx(N,{})})]})},g={Pagination:se,Root:ee,Content:ae},ne=({src:s,poster:t})=>e.jsx("video",{className:"w-full h-full object-cover",src:s,poster:t,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,children:"Your browser does not support the video tag."}),ie=({children:s,visible:t,onPress:r})=>{const a=l=>{l.stopPropagation(),r?.()},i=t?"opacity-100":"opacity-0";return e.jsx("div",{onClick:a,className:`absolute inset-0 bg-black flex flex-col ${i} transition-opacity duration-400 cursor-pointer`,children:s})},oe=({content:s,onPress:t})=>{const r=c(s,"media[0].type","image"),a=[c(s,"media[0].url",""),c(s,"media[0].src",""),c(s,"thumbnail[0].src","")].find(Boolean)||"",[i,l]=d.useState(!1),m=`https://www.instagram.com/p/${s.shortcode}/`,f=()=>{l(!0)},h=()=>{l(!1)};return e.jsxs("div",{className:"w-full h-full flex relative bg-cover bg-center bg-gray-100",style:{backgroundImage:`url(${a})`},onMouseEnter:f,onMouseLeave:h,onClick:()=>{l(!i)},children:[r==="file"&&e.jsx(ne,{src:c(s,"media[0].url",""),poster:c(s,"thumbnail[0].src")}),e.jsxs(ie,{visible:i,onPress:t,children:[e.jsxs("div",{className:"flex-1 flex flex-row items-center justify-center gap-4 text-white",children:[e.jsxs("div",{className:"flex-row flex gap-2 text-2xl",children:[s.like_count,e.jsx(W,{className:"text-white",size:32})]}),e.jsxs("div",{className:"flex-row flex gap-2 text-2xl",children:[s.comments_count,e.jsx(X,{className:"text-white",size:32})]})]}),e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-4 left-4 flex flex-row items-center gap-2 text-white",children:e.jsx(N,{className:"text-white mb-4 ml-4"})}),s.children?.data?.length&&e.jsx(Y,{className:"text-white absolute top-4 right-4",size:32})]})]})},ge=({feed:s})=>{const[t,r]=d.useState([s]),[a,i]=d.useState(0),l=d.useRef(null),m=d.useMemo(()=>t.flatMap(n=>n.nodes.map(o=>({...o,pageInfo:n.pageInfo}))),[t]),[f,h]=d.useState(!1),k=d.useCallback(async n=>{const o=(n.pageInfo?.page||1)+1;if(!(m.some(p=>p.pageInfo?.page===o)||o>n.pageInfo?.pageCount))try{const M=await(await fetch(`/feed/feed-${o}.json`)).json();r(_=>[..._,M])}catch(p){console.error("Failed to load next page",p);return}},[m,r]),[u,w]=d.useState(void 0),I=isNaN(Number(u))?void 0:m[Number(u)],C=async()=>{const n=u?Number(u):0;if(n>=m.length-1)return;const o=n+1;w(o),l.current?.slideTo(o,500,!1)},S=async()=>{const n=u?Number(u):0;if(n<=0)return;const o=n-1;w(o),l.current?.slideTo(o,500,!1)};return d.useRef(null),e.jsxs(e.Fragment,{children:[e.jsx(j.Root,{open:f,onClose:()=>h(!1),children:e.jsx(j.Content,{title:e.jsx(g.Pagination,{canGoBack:u?Number(u)>0:!1,canGoForward:u!==void 0?Number(u)<m.length-1:!1,onGoForward:C,onGoBack:S,children:e.jsx("button",{onClick:()=>h(!1),children:e.jsx(H,{size:32,className:"text-brown"})})}),children:e.jsx(g.Root,{children:e.jsx(g.Content,{data:I?.feedJSON})})})}),e.jsx(v,{slidesPerView:3,spaceBetween:20,pagination:{dynamicBullets:!0,dynamicMainBullets:3},className:"h-120 w-full",height:300,modules:[b],initialSlide:a,onSlideChange:async n=>{i(n.activeIndex),await k(m[n.activeIndex])},onSwiper:n=>l.current=n,breakpoints:{"@0.00":{slidesPerView:1},"@0.6":{slidesPerView:2},"@0.75":{slidesPerView:3},"@1.00":{slidesPerView:3},"@1.50":{slidesPerView:4}},children:m.map(({feedJSON:n},o)=>e.jsx(y,{className:"pb-8",children:e.jsx(oe,{content:n,onPress:()=>{l.current?.slideTo(o,500,!1),w(o),h(!0)}})},n.shortcode))})]})};export{ge as default};

import{j as $}from"./jsx-runtime.D_zvdyIk.js";import{s as F,d as te,S as ne,P as re}from"./swiper-core.D_KnHd_X.js";import{r as p,R as g}from"./index.6otl1p8d.js";/* empty css                       */const W=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function T(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"&&!e.__swiper__}function L(e,t){const i=["__proto__","constructor","prototype"];Object.keys(t).filter(n=>i.indexOf(n)<0).forEach(n=>{typeof e[n]>"u"?e[n]=t[n]:T(t[n])&&T(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:L(e[n],t[n]):e[n]=t[n]})}function q(e){return e===void 0&&(e={}),e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function G(e){return e===void 0&&(e={}),e.pagination&&typeof e.pagination.el>"u"}function U(e){return e===void 0&&(e={}),e.scrollbar&&typeof e.scrollbar.el>"u"}function K(e){e===void 0&&(e="");const t=e.split(" ").map(n=>n.trim()).filter(n=>!!n),i=[];return t.forEach(n=>{i.indexOf(n)<0&&i.push(n)}),i.join(" ")}function ie(e){return e===void 0&&(e=""),e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}function se(e){let{swiper:t,slides:i,passedParams:n,changedParams:u,nextEl:l,prevEl:d,scrollbarEl:a,paginationEl:r}=e;const v=u.filter(o=>o!=="children"&&o!=="direction"&&o!=="wrapperClass"),{params:s,pagination:f,navigation:h,scrollbar:w,virtual:S,thumbs:I}=t;let b,c,x,N,R,_,C,P;u.includes("thumbs")&&n.thumbs&&n.thumbs.swiper&&!n.thumbs.swiper.destroyed&&s.thumbs&&(!s.thumbs.swiper||s.thumbs.swiper.destroyed)&&(b=!0),u.includes("controller")&&n.controller&&n.controller.control&&s.controller&&!s.controller.control&&(c=!0),u.includes("pagination")&&n.pagination&&(n.pagination.el||r)&&(s.pagination||s.pagination===!1)&&f&&!f.el&&(x=!0),u.includes("scrollbar")&&n.scrollbar&&(n.scrollbar.el||a)&&(s.scrollbar||s.scrollbar===!1)&&w&&!w.el&&(N=!0),u.includes("navigation")&&n.navigation&&(n.navigation.prevEl||d)&&(n.navigation.nextEl||l)&&(s.navigation||s.navigation===!1)&&h&&!h.prevEl&&!h.nextEl&&(R=!0);const E=o=>{t[o]&&(t[o].destroy(),o==="navigation"?(t.isElement&&(t[o].prevEl.remove(),t[o].nextEl.remove()),s[o].prevEl=void 0,s[o].nextEl=void 0,t[o].prevEl=void 0,t[o].nextEl=void 0):(t.isElement&&t[o].el.remove(),s[o].el=void 0,t[o].el=void 0))};u.includes("loop")&&t.isElement&&(s.loop&&!n.loop?_=!0:!s.loop&&n.loop?C=!0:P=!0),v.forEach(o=>{if(T(s[o])&&T(n[o]))Object.assign(s[o],n[o]),(o==="navigation"||o==="pagination"||o==="scrollbar")&&"enabled"in n[o]&&!n[o].enabled&&E(o);else{const B=n[o];(B===!0||B===!1)&&(o==="navigation"||o==="pagination"||o==="scrollbar")?B===!1&&E(o):s[o]=n[o]}}),v.includes("controller")&&!c&&t.controller&&t.controller.control&&s.controller&&s.controller.control&&(t.controller.control=s.controller.control),u.includes("children")&&i&&S&&s.virtual.enabled?(S.slides=i,S.update(!0)):u.includes("virtual")&&S&&s.virtual.enabled&&(i&&(S.slides=i),S.update(!0)),u.includes("children")&&i&&s.loop&&(P=!0),b&&I.init()&&I.update(!0),c&&(t.controller.control=s.controller.control),x&&(t.isElement&&(!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-pagination"),r.part.add("pagination"),t.el.appendChild(r)),r&&(s.pagination.el=r),f.init(),f.render(),f.update()),N&&(t.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),t.el.appendChild(a)),a&&(s.scrollbar.el=a),w.init(),w.updateSize(),w.setTranslate()),R&&(t.isElement&&((!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-button-next"),F(l,t.hostEl.constructor.nextButtonSvg),l.part.add("button-next"),t.el.appendChild(l)),(!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-button-prev"),F(d,t.hostEl.constructor.prevButtonSvg),d.part.add("button-prev"),t.el.appendChild(d))),l&&(s.navigation.nextEl=l),d&&(s.navigation.prevEl=d),h.init(),h.update()),u.includes("allowSlideNext")&&(t.allowSlideNext=n.allowSlideNext),u.includes("allowSlidePrev")&&(t.allowSlidePrev=n.allowSlidePrev),u.includes("direction")&&t.changeDirection(n.direction,!1),(_||P)&&t.loopDestroy(),(C||P)&&t.loopCreate(),t.update()}function le(e,t){e===void 0&&(e={}),t===void 0&&(t=!0);const i={on:{}},n={},u={};L(i,te),i._emitClasses=!0,i.init=!1;const l={},d=W.map(r=>r.replace(/_/,"")),a=Object.assign({},e);return Object.keys(a).forEach(r=>{typeof e[r]>"u"||(d.indexOf(r)>=0?T(e[r])?(i[r]={},u[r]={},L(i[r],e[r]),L(u[r],e[r])):(i[r]=e[r],u[r]=e[r]):r.search(/on[A-Z]/)===0&&typeof e[r]=="function"?t?n[`${r[2].toLowerCase()}${r.substr(3)}`]=e[r]:i.on[`${r[2].toLowerCase()}${r.substr(3)}`]=e[r]:l[r]=e[r])}),["navigation","pagination","scrollbar"].forEach(r=>{i[r]===!0&&(i[r]={}),i[r]===!1&&delete i[r]}),{params:i,passedParams:u,rest:l,events:n}}function ae(e,t){let{el:i,nextEl:n,prevEl:u,paginationEl:l,scrollbarEl:d,swiper:a}=e;q(t)&&n&&u&&(a.params.navigation.nextEl=n,a.originalParams.navigation.nextEl=n,a.params.navigation.prevEl=u,a.originalParams.navigation.prevEl=u),G(t)&&l&&(a.params.pagination.el=l,a.originalParams.pagination.el=l),U(t)&&d&&(a.params.scrollbar.el=d,a.originalParams.scrollbar.el=d),a.init(i)}function oe(e,t,i,n,u){const l=[];if(!t)return l;const d=r=>{l.indexOf(r)<0&&l.push(r)};if(i&&n){const r=n.map(u),v=i.map(u);r.join("")!==v.join("")&&d("children"),n.length!==i.length&&d("children")}return W.filter(r=>r[0]==="_").map(r=>r.replace(/_/,"")).forEach(r=>{if(r in e&&r in t)if(T(e[r])&&T(t[r])){const v=Object.keys(e[r]),s=Object.keys(t[r]);v.length!==s.length?d(r):(v.forEach(f=>{e[r][f]!==t[r][f]&&d(r)}),s.forEach(f=>{e[r][f]!==t[r][f]&&d(r)}))}else e[r]!==t[r]&&d(r)}),l}const ce=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.emit("_virtualUpdated"),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())};function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},V.apply(this,arguments)}function J(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function Z(e){const t=[];return g.Children.toArray(e).forEach(i=>{J(i)?t.push(i):i.props&&i.props.children&&Z(i.props.children).forEach(n=>t.push(n))}),t}function ue(e){const t=[],i={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return g.Children.toArray(e).forEach(n=>{if(J(n))t.push(n);else if(n.props&&n.props.slot&&i[n.props.slot])i[n.props.slot].push(n);else if(n.props&&n.props.children){const u=Z(n.props.children);u.length>0?u.forEach(l=>t.push(l)):i["container-end"].push(n)}else i["container-end"].push(n)}),{slides:t,slots:i}}function de(e,t,i){if(!i)return null;const n=s=>{let f=s;return s<0?f=t.length+s:f>=t.length&&(f=f-t.length),f},u=e.isHorizontal()?{[e.rtlTranslate?"right":"left"]:`${i.offset}px`}:{top:`${i.offset}px`},{from:l,to:d}=i,a=e.params.loop?-t.length:0,r=e.params.loop?t.length*2:t.length,v=[];for(let s=a;s<r;s+=1)s>=l&&s<=d&&v.push(t[n(s)]);return v.map((s,f)=>g.cloneElement(s,{swiper:e,style:u,key:s.props.virtualIndex||s.key||`slide-${f}`}))}function A(e,t){return typeof window>"u"?p.useEffect(e,t):p.useLayoutEffect(e,t)}const H=p.createContext(null),fe=p.createContext(null),Q=p.forwardRef(function(e,t){let{className:i,tag:n="div",wrapperTag:u="div",children:l,onSwiper:d,...a}=e===void 0?{}:e,r=!1;const[v,s]=p.useState("swiper"),[f,h]=p.useState(null),[w,S]=p.useState(!1),I=p.useRef(!1),b=p.useRef(null),c=p.useRef(null),x=p.useRef(null),N=p.useRef(null),R=p.useRef(null),_=p.useRef(null),C=p.useRef(null),P=p.useRef(null),{params:E,passedParams:o,rest:B,events:j}=le(a),{slides:z,slots:M}=ue(l),D=()=>{S(!w)};Object.assign(E.on,{_containerClasses(m,O){s(O)}});const y=()=>{Object.assign(E.on,j),r=!0;const m={...E};if(delete m.wrapperClass,c.current=new ne(m),c.current.virtual&&c.current.params.virtual.enabled){c.current.virtual.slides=z;const O={cache:!1,slides:z,renderExternal:h,renderExternalUpdate:!1};L(c.current.params.virtual,O),L(c.current.originalParams.virtual,O)}};b.current||y(),c.current&&c.current.on("_beforeBreakpoint",D);const Y=()=>{r||!j||!c.current||Object.keys(j).forEach(m=>{c.current.on(m,j[m])})},k=()=>{!j||!c.current||Object.keys(j).forEach(m=>{c.current.off(m,j[m])})};p.useEffect(()=>()=>{c.current&&c.current.off("_beforeBreakpoint",D)}),p.useEffect(()=>{!I.current&&c.current&&(c.current.emitSlidesClasses(),I.current=!0)}),A(()=>{if(t&&(t.current=b.current),!!b.current)return c.current.destroyed&&y(),ae({el:b.current,nextEl:R.current,prevEl:_.current,paginationEl:C.current,scrollbarEl:P.current,swiper:c.current},E),d&&!c.current.destroyed&&d(c.current),()=>{c.current&&!c.current.destroyed&&c.current.destroy(!0,!1)}},[]),A(()=>{Y();const m=oe(o,x.current,z,N.current,O=>O.key);return x.current=o,N.current=z,m.length&&c.current&&!c.current.destroyed&&se({swiper:c.current,slides:z,passedParams:o,changedParams:m,nextEl:R.current,prevEl:_.current,scrollbarEl:P.current,paginationEl:C.current}),()=>{k()}}),A(()=>{ce(c.current)},[f]);function ee(){return E.virtual?de(c.current,z,f):z.map((m,O)=>g.cloneElement(m,{swiper:c.current,swiperSlideIndex:O}))}return g.createElement(n,V({ref:b,className:K(`${v}${i?` ${i}`:""}`)},B),g.createElement(fe.Provider,{value:c.current},M["container-start"],g.createElement(u,{className:ie(E.wrapperClass)},M["wrapper-start"],ee(),M["wrapper-end"]),q(E)&&g.createElement(g.Fragment,null,g.createElement("div",{ref:_,className:"swiper-button-prev"}),g.createElement("div",{ref:R,className:"swiper-button-next"})),U(E)&&g.createElement("div",{ref:P,className:"swiper-scrollbar"}),G(E)&&g.createElement("div",{ref:C,className:"swiper-pagination"}),M["container-end"]))});Q.displayName="Swiper";const X=p.forwardRef(function(e,t){let{tag:i="div",children:n,className:u="",swiper:l,zoom:d,lazy:a,virtualIndex:r,swiperSlideIndex:v,...s}=e===void 0?{}:e;const f=p.useRef(null),[h,w]=p.useState("swiper-slide"),[S,I]=p.useState(!1);function b(R,_,C){_===f.current&&w(C)}A(()=>{if(typeof v<"u"&&(f.current.swiperSlideIndex=v),t&&(t.current=f.current),!(!f.current||!l)){if(l.destroyed){h!=="swiper-slide"&&w("swiper-slide");return}return l.on("_slideClass",b),()=>{l&&l.off("_slideClass",b)}}}),A(()=>{l&&f.current&&!l.destroyed&&w(l.getSlideClasses(f.current))},[l]);const c={isActive:h.indexOf("swiper-slide-active")>=0,isVisible:h.indexOf("swiper-slide-visible")>=0,isPrev:h.indexOf("swiper-slide-prev")>=0,isNext:h.indexOf("swiper-slide-next")>=0},x=()=>typeof n=="function"?n(c):n,N=()=>{I(!0)};return g.createElement(i,V({ref:f,className:K(`${h}${u?` ${u}`:""}`),"data-swiper-slide-index":r,onLoad:N},s),d&&g.createElement(H.Provider,{value:c},g.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof d=="number"?d:void 0},x(),a&&!S&&g.createElement("div",{className:"swiper-lazy-preloader"}))),!d&&g.createElement(H.Provider,{value:c},x(),a&&!S&&g.createElement("div",{className:"swiper-lazy-preloader"})))});X.displayName="SwiperSlide";const me=({feed:e})=>{const[t,i]=p.useState([e]),[n,u]=p.useState(0),l=p.useMemo(()=>t.flatMap(a=>a.nodes.map(r=>({...r,pageInfo:a.pageInfo}))),[t]),d=p.useCallback(async a=>{const r=(a.pageInfo?.page||1)+1;if(!(l.some(s=>s.pageInfo?.page===r)||r>a.pageInfo?.pageCount))try{const f=await(await fetch(`/feed/feed-${r}.json`)).json();i(h=>[...h,f])}catch(s){console.error("Failed to load next page",s);return}},[l,i]);return typeof window>"u"?null:$.jsx(Q,{slidesPerView:3,spaceBetween:20,pagination:{dynamicBullets:!0},className:"h-120 w-full",height:300,modules:[re],initialSlide:n,onSlideChange:async a=>{u(a.activeIndex),await d(l[a.activeIndex])},children:l.map(({feedJSON:{media_type:a,media_url:r,shortcode:v,thumbnail_url:s}},f)=>$.jsx(X,{children:$.jsxs("div",{className:"h-full w-full flex items-center justify-center",children:[a!=="VIDEO"&&$.jsx("img",{className:"h-full object-contain block",src:r,loading:"lazy"}),a==="VIDEO"&&$.jsx("video",{className:"h-full object-contain block",poster:s,controls:!0,src:r})]})},v))})};export{me as default};
